### C Operators

运算符(Operators)是一种符号，它告诉编译器执行特定的数学或逻辑操作。C语言内置了丰富的运算符，提供了以下几种运算符。

- 算数运算符(Arithmetic Operators)
- 关系运算符(Relational Operators)
- 逻辑运算符(Logical Operators)
- 位运算符(Bitwise Operators)
- 赋值运算符(Assignment Operators)
- 杂项运算符(Misc Operators)

本节会逐一介绍算数运算符、关系运算符、逻辑运算符、位运算符、赋值运算符和其他运算符。

#### (1)算数运算符

下面显示了C语言支持的所有算数运算符(Arithmetic Operators)。假设变量A的值为10，变量B的值为20，那么：

| Operator | Description                      | Example             |
| :------- | :------------------------------- | :------------------ |
| +        | 把两个操作数相加                 | A + B 得到 30       |
| -        | 从第一个操作数中减去第二个操作数 | A - B 得到 -10      |
| *        | 把两个操作数相乘                 | A * B 得到 200      |
| /        | 分子除以分母                     | B / A 得到 2        |
| %        | 取模运算符，整数除法后的余数     | B % A 得到 0        |
| ++       | 自增运算符，整数值增加 1         | A++ 得到 A 的值为11 |
| --       | 自减运算符，整数值减少 1         | A-- 得到 A 的值为9  |

尝试以下示例来了解 C 编程语言中可用的所有算术运算符：

```c
#include <stdio.h>

int main()
{
	int a = 10;
	int b = 20;
	int c;

	c = a + b;
	printf("1. a + b is : %d\n", c);
	c = a - b;
	printf("2. a - b is : %d\n", c);
	c = a * b;
	printf("3. a * b is : %d\n", c);
	c = b / a;
	printf("4. b / a is : %d\n", c);
	c = b % a;
	printf("5. b %% a is : %d\n", c);

	a = 10;
	c = a++;
	printf("6. a++ is %d, a is %d\n", c, a);

	a = 10;
	c = a--;
	printf("7. a-- is %d, a is %d\n", c, a);

	return 0;
}
```

运行结果：

```bash
$ gcc -o test1 test1.c
$ ./test1
1. a + b is : 30
2. a - b is : -10
3. a * b is : 200
4. b / a is : 2
5. b % a is : 0
6. a++ is 10, a is 11
7. a-- is 10, a is 9
```

对于`a++`和`++a`而言，本质上都是`a = a + 1`，区别是先赋值后运算还是先运算后赋值。

对于`a--`和`--a`而言，本质上都是`a = a - 1`，区别是先赋值后运算还是先运算后赋值。

以下示例展示了`a++`、`++a`、`a--`和`--a`的区别。

```c
#include <stdio.h>

int main(){
	int a,c;

	printf("1.先赋值后运算：\n");
	a = 10;
	c = a++;
	printf("c = a++的值是：%d。(先将a的值赋值给c，再进行运算得到新的a值)\n", c);
	printf("a的值是：%d。(此时的a就是a++运算完成后新的a值)\n", a);
	a = 10;
	c = a--;
	printf("c = a--的值是：%d。(先将a的值赋值给c，再进行运算得到新的a值)\n", c);
	printf("a的值是：%d。(此时的a就是a--运算完成后新的a值)\n\n", a);


	printf("2.先运算后赋值：\n");
	a = 10;
	c = ++a;
	printf("c = ++a的值是：%d。(先运算得到新的a值，然后再赋值给c)\n", c);
	printf("a的值是：%d。(此时的a就是++a运算完成的a值)\n", a);
	a = 10;
	c = --a;
	printf("c = --a的值是：%d。(先运算得到新的a值，然后再赋值给c)\n", c);
	printf("a的值是：%d。(此时的a就是--a运算完成后的a值)\n", a);

	return 0;
}
```

运行结果：

```c
$ gcc -o test2 test2.c
$ ./test2
1.先赋值后运算：
c = a++的值是：10。(先将a的值赋值给c，再进行运算得到新的a值)
a的值是：11。(此时的a就是a++运算完成后新的a值)
c = a--的值是：10。(先将a的值赋值给c，再进行运算得到新的a值)
a的值是：9。(此时的a就是a--运算完成后新的a值)

2.先运算后赋值：
c = ++a的值是：11。(先运算得到新的a值，然后再赋值给c)
a的值是：11。(此时的a就是++a运算完成的a值)
c = --a的值是：9。(先运算得到新的a值，然后再赋值给c)
a的值是：9。(此时的a就是--a运算完成后的a值)
```

#### (2)关系运算符

下表显示了C语言支持的所有关系运算符(Relational Operators)。假设变量A的值为10，变量B的值为20，那么：

| Operator | Description                                                  | Example          |
| :------- | :----------------------------------------------------------- | :--------------- |
| \==      | 检查两个操作数的值是否相等，如果相等则条件为真。             | (A \== B) 为假。 |
| \!=      | 检查两个操作数的值是否相等，如果不相等则条件为真。           | (A \!= B) 为真。 |
| \>       | 检查左操作数的值是否大于右操作数的值，如果是则条件为真。     | (A > B) 为假。   |
| \<       | 检查左操作数的值是否小于右操作数的值，如果是则条件为真。     | (A < B) 为真。   |
| \>=      | 检查左操作数的值是否大于或等于右操作数的值，如果是则条件为真。 | (A >= B) 为假。  |
| \<=      | 检查左操作数的值是否小于或等于右操作数的值，如果是则条件为真。 | (A <= B) 为真。  |

尝试以下示例来了解 C 编程语言中可用的所有关系运算符：

```c
#include <stdio.h>

int main(){
	int a = 10;
	int b = 20;

	if(a == b){
		printf("1. a is equal to b.\n");
	}else{
		printf("1. a is not equal to b.\n");
	}
	if(a != b){
		printf("2. a is not equal to b.\n");
	}else{
		printf("2. a is equal to b.\n");
	}


	if(a < b){
		printf("3. a is less than b.\n");
	}else{
		printf("3. a is not less than b.\n");
	}

	if(a > b){
		printf("4. a is greater than b.\n");
	}else{
		printf("4. a is not greater than b.\n");
	}
  

	if(a <= b){
		printf("5. a is either less than or equal to b.\n");
	}
	if(a >= b ){
		printf("6. a is either greater than or equal to b.\n");
	}

	return 0;
}
```

运行结果：

```c
$ gcc -o test3 test3.c
$ ./test3
1. a is not equal to b.
2. a is not equal to b.
3. a is less than b.
4. a is not greater than b.
5. a is either less than or equal to b.
```

#### (3)逻辑运算符

下表显示了C语言支持的所有逻辑运算符(Logical Operators)。假设变量A的值为10，变量B的值为0，那么：

| Operator | Description                                                  | Example           |
| :------- | :----------------------------------------------------------- | :---------------- |
| &&       | 逻辑与运算符。如果两个操作数都非零，则条件为真。             | (A && B) 为假。   |
| \|\|     | 逻辑或运算符。如果两个操作数中有任意一个非零，则条件为真。   | (A \|\| B) 为真。 |
| !        | 逻辑非运算符。用来逆转操作数的逻辑状态。如果条件为真则逻辑非运算符将使其为假。如果条件为假则逻辑非运算符将使其为真。 | !(A && B) 为真。  |

尝试以下示例来了解 C 编程语言中可用的所有逻辑运算符：

```c
#include <stdio.h>

int main(){
	int a = 10;
	int b = 0;

	if(a && b){
		printf("1. a && b is true.\n");
	}else{
		printf("1. a && b is false.\n");
	}
	if(a || b){
		printf("2. a || b is true.\n");
	}else{
		printf("2. a || b is false.\n");
	}
	if(!(a && b)){
		printf("3. !(a && b) is true.\n");
	}else{
		printf("3. !(a && b) is false.\n");
	}

	return 0;
}
```

运行结果：

```c
$ gcc -o test4 test4.c
$ ./test4
1. a && b is false.
2. a || b is true.
3. !(a && b) is true.
```

#### (4)位运算符

位运算符(Bitwise Operators)作用于位，并逐位执行操作。

假设A=60，B=13，现在以二进制形式表示它们：

```
A = 0011,1100
B = 0000,1101
```

下表显示了 C 语言支持的位运算符。假设变量A的值为60，变量B的值为13，则：

| Operator | Description                                                  | Example                         |
| :------- | :----------------------------------------------------------- | :------------------------------ |
| &        | 按位与运算符，按二进制位进行"与"运算。                       | (A & B)将得到12，即为0000,1100  |
| \|       | 按位或运算符，按二进制位进行"或"运算。                       | (A \| B)将得到61，即为0011,1101 |
| ^        | 按位异或运算符，按二进制位进行"异或"运算。                   | (A ^ B)将得到49，即为0011,0001  |
| ~        | 按位取反运算符，按二进制位进行"取反"运算。                   | (~A)将得到-61，即为1100,0011。  |
| <<       | 按位左移运算符。将一个运算对象的各二进制位全部左移若干位（左边的二进制位丢弃，右边补0）。 | A << 2将得到240，即为1111,0000  |
| >>       | 按位右移运算符。将一个数的各二进制位全部右移若干位，正数左补0，负数左补1，右边丢弃。 | A >> 2将得到15，即为0000,1111   |

**按位与(&)运算规则：**

0 & 0 = 0;

0 & 1 = 0;

1 & 0 = 0;

1 & 1 = 1;

> 只有两个操作数均为1时，结果才为1。否则为0。

**按位或(|)运算规则：**

0 | 0 = 0;

0 | 1 = 1;

1 | 0 = 1;

1 | 1 = 1;

> 只要有一个操作数为1，结果就为1。否则为0。

**按位异或(^)运算规则：**

0 ^ 0 = 0;

0 ^ 1 = 1;

1 ^ 0 = 1;

1 ^ 1 = 0;

> 相同的为0，不同的为1。

**按位取反(~)运算规则：**

~0 = 1;

~1 = 0;

> 注意这里的取反0和1为二进制位形式的0和1，不是整数0,1,2,3...

比如：~ 0001,0011 结果为：1110,1100。

**按位左移(<<)运算规则：**

将一个运算对象的各二进制位全部左移若干位（左边的二进制位丢弃，右边补0）。

```
A = 0011,1100
A << 2 = 1111,0000
```

**按位左移(>>)运算规则：**

将一个数的各二进制位全部右移若干位，正数左补0，负数左补1，右边丢弃。

```
A = 0011,1100
A >> 2 = 0000,1111
```



`&(按位与)`、`|(按位或)`、`^(异或)`和`~(取反)`的真值表如下所示：

| p    | q    | p & q | p \| q | p ^ q | ~p   |
| :--- | :--- | :---- | :----- | :---- | ---- |
| 0    | 0    | 0     | 0      | 0     | 1    |
| 0    | 1    | 0     | 1      | 1     | 1    |
| 1    | 1    | 1     | 1      | 0     | 0    |
| 1    | 0    | 0     | 1      | 1     | 0    |

尝试以下示例来了解 C 编程语言中可用的所有位运算符：

```c
#include <stdio.h>

int main(){
	unsigned int a = 60;  //0011,1100
	unsigned int b = 13;  //0000,1101
	int c;

	c = a & b;
	printf("1. a & b is : %d\n", c);  //0000,1100(12)
	c = a | b;
	printf("2. a | b is : %d\n", c);  //0011,1101(61)
	c = a ^ b;
	printf("3. a ^ b is : %d\n", c);  //0011,0001(49)
	c = ~a;
	printf("4. ~a is : %d\n", c);     //1100,0011(-61)
	c = a << 2;
	printf("5. a << 2 is : %d\n", c); //1111,0000(240)
	c = a >> 2;
	printf("6. a >> 2 is : %d\n", c); //0000,1111(15)

	return 0;
}
```

运行结果：

```bash
$ gcc -o test5 test5.c
$ ./test5
1. a & b is : 12
2. a | b is : 61
3. a ^ b is : 49
4. ~a is : -61
5. a << 2 is : 240
6. a >> 2 is : 15
```

#### (5)赋值运算符

下表显示了C语言支持的所有赋值运算符(Assignment Operators)。

| Operator | Description                                                  | Example                      |
| :------- | :----------------------------------------------------------- | :--------------------------- |
| =        | 赋值运算符，把右边操作数的值赋给左边操作数。                 | C = A 相当于 把 A 的值赋给 C |
| +=       | 加且赋值运算符，把右边操作数加上左边操作数的结果赋值给左边操作数。 | C += A 相当于 C = C + A      |
| -=       | 减且赋值运算符，把左边操作数减去右边操作数的结果赋值给左边操作数。 | C -= A 相当于 C = C - A      |
| *=       | 乘且赋值运算符，把左边操作数乘以右边操作数的结果赋值给左边操作数。 | C *= A 相当于 C = C * A      |
| /=       | 除且赋值运算符，把左边操作数除以右边操作数的结果赋值给左边操作数。 | C /= A 相当于 C = C / A      |
| %=       | 求模且赋值运算符，把左边操作数除以右边操作数的余数赋值给左边操作数。 | C %= A 相当于 C = C % A      |
| <<\=     | 左移且赋值运算符                                             | C <<\= 2 等同于 C = C << 2   |
| >>\=     | 右移且赋值运算符                                             | C >>\= 2 等同于 C = C >> 2   |
| &=       | 按位与且赋值运算符                                           | C &= 2 等同于 C = C & 2      |
| ^=       | 按位异或且赋值运算符                                         | C ^= 2 等同于 C = C ^ 2      |
| \|=      | 按位或且赋值运算符                                           | C \|= 2 等同于 C = C \| 2    |

尝试以下示例来了解 C 编程语言中可用的所有赋值运算符：

```c
#include <stdio.h>

int main(){
	int a = 10;
	int c;

	printf("value of a is :%d\n", a);
	c = a;   // c = 10
	printf("c = a, c is :%d\n", c);

	c += a;  // c = c + a = 10 + 10 = 20
	printf("c += a, c is :%d\n", c);
	c -= a;  // c = c - a = 20 - 10 = 10
	printf("c -= a, c is :%d\n", c);	
	c *= a;  // c = c * a = 10 * 10 = 100
	printf("c *= a, c is :%d\n", c);	
	c /= a;  // c = c / a = 100 / 10 = 10
	printf("c /= a, c is :%d\n", c);
	c %= a;  // c = c % a = 10 % 10 = 0                         
	printf("c %%= a, c is :%d\n\n", c);

	c = 10;  //0000,1010(10)
	printf("new value of c is :%d\n", c);
	c <<= 2; //0010,1000(40)
	printf("c << 2, c is :%d\n", c);	
	c >>= 2; //0000,1010(10)
	printf("c >> 2, c is :%d\n", c);	
	c &= 2;  //0000,1010(10) & 0000,0010(2) = 0000,0010(2)
	printf("c &= a, c is :%d\n", c);	
	c |= 2;  //0000,0010(2) | 0000,0010(2) = 0000,0010(2)
	printf("c |= 2, c is :%d\n", c);	
	c ^= 2;  //0000,0010(2) ^ 0000,0010(2) = 0000,0000(0)
	printf("c ^= 2, c is :%d\n", c);	

	return 0;
}
```

运行结果：

```bash
$ gcc -o test6 test6.c
$ ./test6
value of a is :10
c = a, c is :10
c += a, c is :20
c -= a, c is :10
c *= a, c is :100
c /= a, c is :10
c %= a, c is :0

new value of c is :10
c << 2, c is :40
c >> 2, c is :10
c &= a, c is :2
c |= 2, c is :2
c ^= 2, c is :0
```

#### (6)杂项运算符

下表列出了 C 语言支持的其他一些重要的运算符，包括`sizeof`、`&`、`*`和`?:`。

| Operator | Description      | Example                                          |
| :------- | :--------------- | :----------------------------------------------- |
| sizeof() | 返回变量的大小。 | sizeof(a) 将返回4，其中a是整数类型。             |
| &        | 返回变量的地址。 | &a 将获得变量的实际内存地址。                    |
| *        | 指向一个变量。   | *a 将指向一个变量。                              |
| ? :      | 条件表达式       | 如果条件为真(?)，则值为X。如果为假(:)，则值为Y。 |

#### (7)C中的运算符优先级

运算符的优先级确定表达式中项的组合。这会影响到一个表达式如何计算。某些运算符比其他运算符有更高的优先级，例如：乘法运算符的优先级高于加法运算符。

比如：`x = 7 + 3 * 2`。在这里 x 被赋值为 13，而不是 20；因为运算符`*`的优先级比`+`高，所以首先计算乘法 3*2，最后再加上7。

下表将按优先级从高到低列出各个运算符。具有较高优先级的运算符出现在表格的上面，具有较低优先级的运算符出现在表格的下面。在表达式中，较高优先级的运算符会优先被计算。

| 类别       | 运算符                               | 结合性   |
| :--------- | :----------------------------------- | :------- |
| 后缀       | () [] \-> . \++ \--                  | 从左到右 |
| 一元       | + - ! ~ \++ \-- (type)* & sizeof     | 从右到左 |
| 乘除       | * / %                                | 从左到右 |
| 加减       | + -                                  | 从左到右 |
| 移位       | << >>                                | 从左到右 |
| 关系       | < \<= > \>=                          | 从左到右 |
| 相等       | \== \!=                              | 从左到右 |
| 位与 AND   | &                                    | 从左到右 |
| 位异或 XOR | ^                                    | 从左到右 |
| 位或 OR    | \|                                   | 从左到右 |
| 逻辑与 AND | &&                                   | 从左到右 |
| 逻辑或 OR  | \|\|                                 | 从左到右 |
| 条件       | ?:                                   | 从右到左 |
| 赋值       | = += -= *= /= %= >\>= <<\= &= ^= \|= | 从右到左 |
| 逗号       | ,                                    | 从左到右 |

尝试以下示例来了解 C 编程语言中运算符的优先级：

```c
#include <stdio.h>

int main(){

	int a = 20;
	int b = 10;
	int c = 15;
	int d = 5;
	int e;

	e = (a + b) * c / d;                             //(30 * 15) / 5
	printf("Value of (a + b) * c / d is : %d\n", e);
	e = ((a + b) * c) / d;                           //(30 * 15) / 5
	printf("Value of ((a + b) * c) / d is : %d\n", e);
	e = (a + b) * (c / d);                           //(30) * (15/5)
	printf("Value of (a + b) * (c / d) is : %d\n", e);
	e = a + (b * c) / d;                             //20 + (150/5)
	printf("Value of a + (b * c) / d is : %d\n", e);


	return 0;
}
```

运次结果：

```bash
$ gcc -o test7 test7.c
$ ./test7
Value of (a + b) * c / d is : 90
Value of ((a + b) * c) / d is : 90
Value of (a + b) * (c / d) is : 90
Value of a + (b * c) / d is : 50
```

